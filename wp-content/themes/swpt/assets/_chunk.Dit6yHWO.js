const p="school/v1",_="test",f=`/wp-json/${p}/${_}`,h=async t=>{const e=await fetch(`${f}/check-test/`,{method:"POST",body:t});if(e.ok)return await e.json()},m=t=>{const e=t.currentTarget.parentElement.parentElement.parentElement.parentElement;e.classList.remove("questions__item--empty"),e.querySelectorAll("input").forEach(s=>{s.removeEventListener("click",m)})},E=async()=>{const t=document.querySelector("form#test"),e=document.querySelector(".loader");t&&t.addEventListener("submit",l=>{l.preventDefault(),e.classList.add("loader--active");const s=document.querySelectorAll(".questions__item");let u=!0;s.length&&s.forEach(o=>{const r=o.querySelectorAll("input");let i=!1;r.forEach(c=>{c.checked&&(i=!0)}),i||(u=!1,o.classList.add("questions__item--empty"),r.forEach(c=>{c.addEventListener("click",m)}),e.classList.remove("loader--active"))}),u?h(new FormData(t)).then(o=>{if(o.success&&o.data.length===s.length){const r=document.querySelector(".questions__submit");r.disabled=!0,document.querySelectorAll("form input").forEach(n=>{n.disabled=!0});let c=0;s.forEach((n,d)=>{o.data[d].is_answer_correct?(n.classList.add("questions__item--correct"),c++):(n.classList.add("questions__item--error"),n.querySelectorAll("input")[o.data[d].correct_answer].classList.add("answers__correct-answer"))});const a=document.querySelector(".questions__response");if(a){const n=a.querySelector(".questions__response-value");n.textContent=`${c}/${s.length}`,a.classList.add("questions__response--visible")}setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),e.classList.remove("loader--active")},1e3)}}):e.classList.remove("loader--active")})};export{E as checkTest};
