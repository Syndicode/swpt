const p="school/v1",_="test",f=`/wp-json/${p}/${_}`,h=async t=>{const e=await fetch(`${f}/check-internal-exam/`,{method:"POST",body:t});if(e.ok)return await e.json()},m=t=>{const e=t.currentTarget.parentElement.parentElement.parentElement.parentElement;e.classList.remove("questions__item--empty"),e.querySelectorAll("input").forEach(s=>{s.removeEventListener("click",m)})},E=async()=>{const t=document.querySelector("form#internal-exam"),e=document.querySelector(".loader");t&&t.addEventListener("submit",l=>{l.preventDefault(),e.classList.add("loader--active");const s=document.querySelectorAll(".questions__item");let u=!0;s.length&&s.forEach(n=>{const c=n.querySelectorAll("input");let a=!1;c.forEach(r=>{r.checked&&(a=!0)}),a||(u=!1,n.classList.add("questions__item--empty"),c.forEach(r=>{r.addEventListener("click",m)}),e.classList.remove("loader--active"))}),u?h(new FormData(t)).then(n=>{if(n.success&&n.data.length===s.length){const c=document.querySelector(".questions__submit");c.disabled=!0,document.querySelectorAll("form input").forEach(o=>{o.disabled=!0});let r=0;s.forEach((o,d)=>{n.data[d].is_answer_correct?(o.classList.add("questions__item--correct"),r++):(o.classList.add("questions__item--error"),o.querySelectorAll("input")[n.data[d].correct_answer].classList.add("answers__correct-answer"))});const i=document.querySelector(".questions__response");if(i){const o=i.querySelector(".questions__response-value");o.textContent=`${r}/${s.length}`,i.classList.add("questions__response--visible")}setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"}),document.querySelector("#internal-exam-timer").style.display="none",e.classList.remove("loader--active")},1e3)}}):e.classList.remove("loader--active")})};export{E as checkInternalExam};
